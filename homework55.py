
import os

def добавить_контакт():
    фамилия = input("Введите фамилию: ")
    имя = input("Введите имя: ")
    отчество = input("Введите отчество: ")
    номер = input("Введите номер телефона: ")
    return фамилия, имя, отчество, номер

def сохранить_контакты(контакты):
    with open("телефонный_справочник.txt", "w") as file:
        for контакт in контакты:
            file.write(f"{контакт[0]},{контакт[1]},{контакт[2]},{контакт[3]}\n")
    print("Данные сохранены успешно.")

def загрузить_контакты():
    контакты = []
    if os.path.exists("телефонный_справочник.txt"):
        with open("телефонный_справочник.txt", "r") as file:
            for line in file:
                фамилия, имя, отчество, номер = line.strip().split(",")
                контакты.append((фамилия, имя, отчество, номер))
    return контакты

def вывод_контактов(контакты):
    for контакт in контакты:
        print(f"Фамилия: {контакт[0]}")
        print(f"Имя: {контакт[1]}")
        print(f"Отчество: {контакт[2]}")
        print(f"Номер телефона: {контакт[3]}")
        print()

def поиск_по_фамилии(контакты):
    фамилия = input("Введите фамилию для поиска: ")
    найденные_контакты = []
    for контакт in контакты:
        if контакт[0] == фамилия:
            найденные_контакты.append(контакт)
    if найденные_контакты:
        print(f"Найдено {len(найденные_контакты)} контактов:")
        вывод_контактов(найденные_контакты)
    else:
        print("Контакты с такой фамилией не найдены.")
    print()

def изменить_контакт(контакты):
    фамилия = input("Введите фамилию контакта, который нужно изменить: ")
    for контакт in контакты:
        if контакт[0] == фамилия:
            print(f"Найден контакт для изменения:")
            print(f"Фамилия: {контакт[0]}")
            print(f"Имя: {контакт[1]}")
            print(f"Отчество: {контакт[2]}")
            print(f"Номер телефона: {контакт[3]}")
            print()
            новая_фамилия = input("Введите новую фамилию: ")
            новое_имя = input("Введите новое имя: ")
            новое_отчество = input("Введите новое отчество: ")
            новый_номер = input("Введите новый номер телефона: ")
            контакты.remove(контакт)
            контакты.append((новая_фамилия, новое_имя, новое_отчество, новый_номер))
            print("Контакт успешно изменен.")
            сохранить_контакты(контакты)
            return
    print("Контакт с такой фамилией не найден.")
    print()

def удалить_контакт(контакты):
    фамилия = input("Введите фамилию контакта, который нужно удалить: ")
    for контакт in контакты:
        if контакт[0] == фамилия:
            print(f"Найден контакт для удаления:")
            print(f"Фамилия: {контакт[0]}")
            print(f"Имя: {контакт[1]}")
            print(f"Отчество: {контакт[2]}")
            print(f"Номер телефона: {контакт[3]}")
            print()
            выбор = input("Вы уверены, что хотите удалить этот контакт? (y/n): ")
            if выбор.lower() == "y":
                контакты.remove(контакт)
                print("Контакт успешно удален.")
                сохранить_контакты(контакты)
            return
    print("Контакт с такой фамилией не найден.")
    print()

def главное_меню():
    контакты = загрузить_контакты()
    while True:
        print("Главное меню:")
        print("1 - Добавить контакт")
        print("2 - Вывести все контакты")
        print("3 - Поиск по фамилии")
        print("4 - Изменить контакт")
        print("5 - Удалить контакт")
        print("6 - Выход")

        выбор = input("Выберите опцию: ")
        if выбор == "1":
            контакты.append(добавить_контакт())
            сохранить_контакты(контакты)
        elif выбор == "2":
            вывод_контактов(контакты)
        elif выбор == "3":
            поиск_по_фамилии(контакты)
        elif выбор == "4":
            изменить_контакт(контакты)
        elif выбор == "5":
            удалить_контакт(контакты)
        elif выбор == "6":
            сохранить_контакты(контакты)
            break
        else:
            print("Ошибка. Пожалуйста, выберите правильную опцию.")

главное_меню()
